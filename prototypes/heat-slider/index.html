<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <meta name="prototype:description" content="Interactive oven heat distribution control with dynamic gradient visualization and element icons." />
  <title>heat-slider</title>
  <link rel="stylesheet" href="../../shared/prototype-shell.css">
  <link rel="stylesheet" href="../../shared/components/heat-slider.css">
  <style>
    :root {
      color-scheme: dark;
      font-family: 'Inter', -apple-system, BlinkMacSystemFont, sans-serif;
      --label-xs-lv2: 14px;
      --label-xs-lv2-line-height: 18px;
      --label-xs-lv2-font: 'Inter', -apple-system, BlinkMacSystemFont, sans-serif;
      --label-xs-lv2-weight: 500;
      --label-xs-lv2-spacing: 0.08em;
      --label-xs-lv2-features: "ss01" 1, "ss02" 1;
    }

    * {
      box-sizing: border-box;
    }

    body {
      margin: 0;
      background: #000;
      color: #eee;
      font-family: inherit;
      display: grid;
      place-items: center;
      min-height: 100vh;
      overflow: hidden;
    }

    .outer-container {
      display: grid;
      place-items: center;
    }

    .prototype-container {
      display: grid;
      align-content: center;
      justify-items: stretch;
      gap: 24px;
      width: 272px;
    }

    #heatSlider {
      --heat-slider-cool: #490307;
      width: 272px;
    }

  </style>
</head>
<body>
  <div class="outer-container">
    <div class="prototype-container">
      <div id="heatSlider" data-heat-slider></div>
    </div>
  </div>

  <button class="debug-toggle" id="debugToggle" type="button" aria-expanded="false" aria-controls="debugPanel">Open controls</button>

  <div class="debug-panel" id="debugPanel" role="region" aria-label="Heat controls">
    <h3>Heat Controls</h3>

    <div class="debug-control">
      <label for="animationSpeed">Animation speed</label>
      <input type="range" id="animationSpeed" min="0" max="200" step="10" value="80" />
      <div class="debug-value" id="animationSpeedValue">80ms</div>
    </div>

    <div class="debug-control">
      <label>Heat band width</label>
      <div class="debug-value" id="bandWidthValue">auto (25-50)</div>
    </div>

    <div class="debug-control">
      <label for="coolColor">Cool side color</label>
      <input type="color" id="coolColor" value="#490307" />
      <div class="debug-value" id="coolColorValue">#490307</div>
    </div>

    <div class="debug-control">
      <label for="heatIntensity">Heat intensity</label>
      <select id="heatIntensity">
        <option value="0.85" selected>High (85%)</option>
        <option value="0.7">Medium (70%)</option>
        <option value="0.5">Low (50%)</option>
      </select>
    </div>

    <div class="debug-control">
      <label for="stepSize">Step mode</label>
      <select id="stepSize">
        <option value="1">1% increments</option>
        <option value="5">5% increments</option>
        <option value="20">20% increments</option>
        <option value="preset" selected>Preset positions</option>
      </select>
    </div>

    <div class="debug-control">
      <label for="showTitle">Heat distribution title</label>
      <select id="showTitle">
        <option value="true">Show</option>
        <option value="false" selected>Hide</option>
      </select>
    </div>
  </div>

  <div class="instructions">
    Drag the bar, tap for presets, or use keys: <strong>O</strong> / <strong>P</strong> adjust • <strong>Q</strong> toggle • <strong>R</strong> reset
  </div>

  <script src="../../shared/components/heat-slider.global.js"></script>
  <script>
    const slider = new HeatSlider('#heatSlider', {
      initialPosition: 60,
      showTitle: false,
      titleText: 'HEAT DISTRIBUTION',
      onChange: updateBandWidth,
    });

    const animationSpeed = document.getElementById('animationSpeed');
    const animationSpeedValue = document.getElementById('animationSpeedValue');
    const coolColorInput = document.getElementById('coolColor');
    const coolColorValue = document.getElementById('coolColorValue');
    const heatIntensity = document.getElementById('heatIntensity');
    const stepSize = document.getElementById('stepSize');
    const showTitle = document.getElementById('showTitle');
    const bandWidthValue = document.getElementById('bandWidthValue');
    const debugToggle = document.getElementById('debugToggle');
    const debugPanel = document.getElementById('debugPanel');

    function updateBandWidth() {
      const current = slider.root.style.getPropertyValue('--heat-slider-w');
      const numeric = Number(current);
      if (!Number.isFinite(numeric)) {
        bandWidthValue.textContent = 'auto (25-50)';
        return;
      }
      bandWidthValue.textContent = `${Math.round(numeric)}% span`;
    }

    animationSpeed.addEventListener('input', (event) => {
      const value = Number(event.target.value);
      slider.setAnimationDuration(value);
      animationSpeedValue.textContent = `${value}ms`;
    });

    coolColorInput.addEventListener('input', (event) => {
      const value = event.target.value;
      slider.setTheme({ coolColor: value });
      coolColorValue.textContent = value;
    });

    heatIntensity.addEventListener('change', (event) => {
      slider.setIntensity(parseFloat(event.target.value));
    });

    stepSize.addEventListener('change', (event) => {
      slider.setStepMode(event.target.value);
    });

    showTitle.addEventListener('change', (event) => {
      const shouldShow = event.target.value === 'true';
      slider.showTitle(shouldShow);
    });

    debugToggle.addEventListener('click', () => {
      const isOpen = debugPanel.classList.toggle('open');
      debugToggle.setAttribute('aria-expanded', String(isOpen));
      debugToggle.textContent = isOpen ? 'Close controls' : 'Open controls';
    });

    updateBandWidth();
  </script>
</body>
</html>
