<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Heat Slider Prototype</title>
  <link rel="stylesheet" href="../../shared/components/heat-slider.css">
  <style>
    :root {
      color-scheme: dark;
      font-family: 'Inter', -apple-system, BlinkMacSystemFont, sans-serif;
    }

    * {
      box-sizing: border-box;
    }

    body {
      margin: 0;
      background: #0b0b0b;
      color: #eee;
      font-family: inherit;
      display: grid;
      place-items: center;
      min-height: 100vh;
      overflow: hidden;
    }

    .outer-container {
      width: 400px;
      height: 600px;
      border: 1px solid #444;
      border-top-right-radius: 75px;
      display: grid;
      place-items: center;
      position: relative;
      background: transparent;
    }

    .prototype-container {
      width: 272px;
      height: 480px;
      display: grid;
      align-content: center;
      justify-items: stretch;
      gap: 24px;
    }

    #heatSlider {
      --heat-slider-cool: #490307;
      width: 100%;
    }

    .instructions {
      position: fixed;
      bottom: 20px;
      left: 50%;
      transform: translateX(-50%);
      text-align: center;
      color: #888;
      font-size: 0.9em;
      font-family: inherit;
    }

    .debug-toggle {
      position: fixed;
      top: 20px;
      left: 20px;
      background: #333;
      color: white;
      border: none;
      padding: 8px 12px;
      border-radius: 4px;
      cursor: pointer;
      font-size: 0.8em;
      z-index: 1001;
      font-family: inherit;
    }

    .debug-panel {
      position: fixed;
      top: 20px;
      right: -220px;
      width: 200px;
      padding: 15px;
      border-radius: 8px;
      background: rgba(40, 40, 40, 0.95);
      color: white;
      font-size: 0.8em;
      transition: right 0.3s ease;
      z-index: 1000;
      font-family: inherit;
    }

    .debug-panel.open {
      right: 20px;
    }

    .debug-panel h3 {
      margin: 0 0 10px 0;
      font-size: 1em;
    }

    .debug-control {
      margin: 10px 0;
    }

    .debug-control label {
      display: block;
      margin-bottom: 4px;
    }

    .debug-control input[type="range"],
    .debug-control select,
    .debug-control input[type="color"] {
      width: 100%;
    }

    .debug-value {
      color: #ccc;
      font-size: 0.85em;
    }
  </style>
</head>
<body>
  <div class="outer-container">
    <div class="prototype-container">
      <div id="heatSlider" data-heat-slider></div>
    </div>
  </div>

  <button class="debug-toggle" id="debugToggle" type="button" aria-expanded="false" aria-controls="debugPanel">Open controls</button>

  <div class="debug-panel" id="debugPanel" role="region" aria-label="Heat controls">
    <h3>Heat Controls</h3>

    <div class="debug-control">
      <label for="animationSpeed">Animation speed</label>
      <input type="range" id="animationSpeed" min="0" max="200" step="10" value="80" />
      <div class="debug-value" id="animationSpeedValue">80ms</div>
    </div>

    <div class="debug-control">
      <label>Heat band width</label>
      <div class="debug-value" id="bandWidthValue">auto (25-50)</div>
    </div>

    <div class="debug-control">
      <label for="coolColor">Cool side color</label>
      <input type="color" id="coolColor" value="#490307" />
      <div class="debug-value" id="coolColorValue">#490307</div>
    </div>

    <div class="debug-control">
      <label for="heatIntensity">Heat intensity</label>
      <select id="heatIntensity">
        <option value="0.85" selected>High (85%)</option>
        <option value="0.7">Medium (70%)</option>
        <option value="0.5">Low (50%)</option>
      </select>
    </div>

    <div class="debug-control">
      <label for="stepSize">Step mode</label>
      <select id="stepSize">
        <option value="1">1% increments</option>
        <option value="5">5% increments</option>
        <option value="20">20% increments</option>
        <option value="preset" selected>Preset positions</option>
      </select>
    </div>

    <div class="debug-control">
      <label for="showLabel">Distribution label</label>
      <select id="showLabel">
        <option value="true">Show</option>
        <option value="false" selected>Hide</option>
      </select>
    </div>
  </div>

  <div class="instructions">
    Drag the bar, tap for presets, or use keys: <strong>O</strong> / <strong>P</strong> adjust • <strong>Q</strong> toggle • <strong>R</strong> reset
  </div>

  <script src="../../shared/components/heat-slider.global.js"></script>
  <script>
    const slider = new HeatSlider('#heatSlider', {
      initialPosition: 60,
      showLabel: false,
      onChange: updateBandWidth,
    });

    const animationSpeed = document.getElementById('animationSpeed');
    const animationSpeedValue = document.getElementById('animationSpeedValue');
    const coolColorInput = document.getElementById('coolColor');
    const coolColorValue = document.getElementById('coolColorValue');
    const heatIntensity = document.getElementById('heatIntensity');
    const stepSize = document.getElementById('stepSize');
    const showLabel = document.getElementById('showLabel');
    const bandWidthValue = document.getElementById('bandWidthValue');
    const debugToggle = document.getElementById('debugToggle');
    const debugPanel = document.getElementById('debugPanel');

    function updateBandWidth() {
      const current = slider.root.style.getPropertyValue('--heat-slider-w');
      const numeric = Number(current);
      if (!Number.isFinite(numeric)) {
        bandWidthValue.textContent = 'auto (25-50)';
        return;
      }
      bandWidthValue.textContent = `${Math.round(numeric)}% span`;
    }

    animationSpeed.addEventListener('input', (event) => {
      const value = Number(event.target.value);
      slider.setAnimationDuration(value);
      animationSpeedValue.textContent = `${value}ms`;
    });

    coolColorInput.addEventListener('input', (event) => {
      const value = event.target.value;
      slider.setTheme({ coolColor: value });
      coolColorValue.textContent = value;
    });

    heatIntensity.addEventListener('change', (event) => {
      slider.setIntensity(parseFloat(event.target.value));
    });

    stepSize.addEventListener('change', (event) => {
      slider.setStepMode(event.target.value);
    });

    showLabel.addEventListener('change', (event) => {
      const shouldShow = event.target.value === 'true';
      slider.showLabel(shouldShow);
    });

    debugToggle.addEventListener('click', () => {
      const isOpen = debugPanel.classList.toggle('open');
      debugToggle.setAttribute('aria-expanded', String(isOpen));
      debugToggle.textContent = isOpen ? 'Close controls' : 'Open controls';
    });

    updateBandWidth();
  </script>
</body>
</html>
